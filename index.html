<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>ä¸­æ¦®æˆ’é£²ä¸€è‡‚ä¹‹åŠ›ï½œé…’ç²¾å–®ä½æ›ç®—å™¨</title>
  <style>
    body {
      font-family: "Helvetica Neue", sans-serif;
      background: #f3f8ff;
      margin: 0;
      padding: 0;
      color: #333;
    }
    header {
      display: flex;
      align-items: center;
      background: #ffffff;
      padding: 15px 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    header img {
      height: 60px;
      margin-right: 15px;
    }
    header h1 {
      font-size: 1.5em;
      margin: 0;
      color: #006699;
    }
    header p {
      margin: 2px 0 0;
      font-size: 0.95em;
      color: #666;
    }
    .container {
      max-width: 600px;
      margin: 30px auto;
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.08);
    }
    h2 {
      color: #006699;
    }
    label, select, input, button {
      display: block;
      width: 100%;
      margin: 10px 0;
      font-size: 1em;
    }
    select, input {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background: #1eaaf1;
      color: #fff;
      border: none;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background: #0d8ecf;
    }
    .hidden { display: none; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 5px 10px; text-align: center; }
    .gray-note { font-size: 0.9em; color: gray; text-align: center; margin-top: 10px; }
  </style>
</head>
<body>
  <header>
    <img src="b019a494-1318-469b-ab48-31605803adb8.png" alt="ä¸­æ¦®LOGO">
    <div>
      <h1>ä¸­æ¦®æˆ’é£²ä¸€è‡‚ä¹‹åŠ›</h1>
      <p>é…’ç²¾å–®ä½æ›ç®—å™¨ | ä¸€æ—¥ä¸€è¨˜éŒ„ï¼Œä¸­æ¦®å®ˆè­·æ‚¨</p>
    </div>
  </header>

  <div class="container">
    <h2>é…’ç²¾å–®ä½æ›ç®—å™¨</h2>
    <button id="switchMode">åˆ‡æ›åˆ°ç™»å…¥æ¨¡å¼</button>

    <!-- è¨ªå®¢æ¨¡å¼ -->
    <div id="guestMode">
      <h3>ğŸ§¾ è¨ªå®¢æ¨¡å¼ï¼ˆä¸éœ€ç™»å…¥ï¼‰</h3>
      <label>è«‹é¸æ“‡é…’é¡ï¼š</label>
      <select id="drinkGuest">
        <option value="1.2|350">ç½è£å•¤é…’ï¼ˆ350ccï¼‰ï¼š1.2</option>
        <option value="6.3|600">è‘¡è„é…’ / ç´…é…’ï¼ˆ600ccï¼‰ï¼š6.3</option>
        <option value="13.2|600">ç±³é…’ï¼ˆ600ccï¼‰ï¼š13.2</option>
        <option value="22.8|600">38åº¦é«˜ç²±é…’ï¼ˆ600ccï¼‰ï¼š22.8</option>
        <option value="28|700">å¨å£«å¿Œï¼ˆ700ccï¼‰ï¼š28</option>
        <option value="34.8|600">58åº¦é«˜ç²±é…’ï¼ˆ600ccï¼‰ï¼š34.8</option>
        <option value="24|600">ç™½è˜­åœ°ï¼ˆ600ccï¼‰ï¼š24</option>
        <option value="4.8|600">ä¿åŠ›é” / ç¶­å£«æ¯”ï¼ˆ600ccï¼‰ï¼š4.8</option>
        <option value="9.6|600">çµ•èˆˆé…’ï¼ˆ600ccï¼‰ï¼š9.6</option>
        <option value="9|300">åƒèŒ¸é…’ï¼ˆ300ccï¼‰ï¼š9</option>
        <option value="17.4|300">58åº¦é«˜ç²±é…’ï¼ˆ300ccï¼‰ï¼š17.4</option>
        <option value="30|750">å¨ç‰¹åŠ ï¼ˆ750ccï¼‰ï¼š30</option>
      </select>
      <label>é£²ç”¨é‡ï¼ˆmlï¼‰ï¼š</label>
      <input id="mlGuest" type="number" placeholder="è«‹è¼¸å…¥ml">
      <button onclick="calcGuest()">æ›ç®—</button>
      <div id="resultGuest"></div>
      <p class="gray-note">â€» å»ºè­°æ¯æ—¥é…’ç²¾æ”å–é‡ï¼šç”·æ€§ä¸è¶…é <strong>2 å–®ä½</strong>ï¼Œå¥³æ€§ä¸è¶…é <strong>1 å–®ä½</strong></p>
    </div>

    <!-- ç™»å…¥æ¨¡å¼ -->
    <div id="loginMode" class="hidden">
      <h3>ç™»å…¥æ¨¡å¼ï¼ˆå¯å„²å­˜è¨˜éŒ„ï¼‰</h3>
      <label>è«‹é¸æ“‡é…’é¡ï¼š</label>
      <select id="drinkLogin">
        <option value="1.2|350">ç½è£å•¤é…’ï¼ˆ350ccï¼‰ï¼š1.2</option>
        <option value="6.3|600">è‘¡è„é…’ / ç´…é…’ï¼ˆ600ccï¼‰ï¼š6.3</option>
        <option value="13.2|600">ç±³é…’ï¼ˆ600ccï¼‰ï¼š13.2</option>
        <option value="22.8|600">38åº¦é«˜ç²±é…’ï¼ˆ600ccï¼‰ï¼š22.8</option>
        <option value="28|700">å¨å£«å¿Œï¼ˆ700ccï¼‰ï¼š28</option>
        <option value="34.8|600">58åº¦é«˜ç²±é…’ï¼ˆ600ccï¼‰ï¼š34.8</option>
        <option value="24|600">ç™½è˜­åœ°ï¼ˆ600ccï¼‰ï¼š24</option>
        <option value="4.8|600">ä¿åŠ›é” / ç¶­å£«æ¯”ï¼ˆ600ccï¼‰ï¼š4.8</option>
        <option value="9.6|600">çµ•èˆˆé…’ï¼ˆ600ccï¼‰ï¼š9.6</option>
        <option value="9|300">åƒèŒ¸é…’ï¼ˆ300ccï¼‰ï¼š9</option>
        <option value="17.4|300">58åº¦é«˜ç²±é…’ï¼ˆ300ccï¼‰ï¼š17.4</option>
        <option value="30|750">å¨ç‰¹åŠ ï¼ˆ750ccï¼‰ï¼š30</option>
      </select>
      <label>é£²ç”¨é‡ï¼ˆmlï¼‰ï¼š</label>
      <input id="mlLogin" type="number" placeholder="è«‹è¼¸å…¥ml">
      <button onclick="saveRecord()">å„²å­˜è¨˜éŒ„</button>
      <div id="resultLogin"></div>
      <div id="history"></div>
      <button onclick="clearHistory()">æ¸…é™¤ç´€éŒ„</button>
    </div>
  </div>

<script>
function calcGuest() {
  const [unitPerDrink, fullVolume] = document.getElementById('drinkGuest').value.split('|').map(parseFloat);
  const ml = parseFloat(document.getElementById('mlGuest').value);
  const ratio = ml / fullVolume;
  const units = unitPerDrink * ratio;
  const result = `æ›ç®—çµæœï¼šç´„ ${units.toFixed(1)} å–®ä½`;
  document.getElementById('resultGuest').innerText = result;
}

function saveRecord() {
  const [unitPerDrink, fullVolume] = document.getElementById('drinkLogin').value.split('|').map(parseFloat);
  const ml = parseFloat(document.getElementById('mlLogin').value);
  const selectedText = document.getElementById('drinkLogin').selectedOptions[0].text;
  const ratio = ml / fullVolume;
  const units = unitPerDrink * ratio;
  const result = `æœ¬æ¬¡å–®ä½ï¼š${units.toFixed(2)}`;
  document.getElementById('resultLogin').innerText = result;

  const now = new Date();
  const time = now.toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit' });
  const record = {
    date: now.toISOString().split('T')[0],
    time: time,
    drink: selectedText,
    ml: ml,
    unit: units.toFixed(2)
  };
  let history = JSON.parse(localStorage.getItem('alcoholHistory') || '[]');
  history.push(record);
  localStorage.setItem('alcoholHistory', JSON.stringify(history));
  displayHistory();
}

function displayHistory() {
  let history = JSON.parse(localStorage.getItem('alcoholHistory') || '[]');
  if (history.length === 0) {
    document.getElementById('history').innerText = 'ç›®å‰æ²’æœ‰ç´€éŒ„';
    return;
  }
  let html = '<table><tr><th>æ—¥æœŸ</th><th>æ™‚é–“</th><th>é…’é¡</th><th>é£²ç”¨é‡ml</th><th>å–®ä½</th></tr>';
  let today = new Date().toISOString().split('T')[0];
  let total = 0;
  for (let r of history.reverse()) {
    html += `<tr><td>${r.date}</td><td>${r.time}</td><td>${r.drink}</td><td>${r.ml}</td><td>${r.unit}</td></tr>`;
    if (r.date === today) total += parseFloat(r.unit);
  }
  html += `</table><p><strong>ä»Šæ—¥ç¸½å–®ä½ï¼š${total.toFixed(2)}</strong></p>`;
  document.getElementById('history').innerHTML = html;
}

function clearHistory() {
  localStorage.removeItem('alcoholHistory');
  displayHistory();
}

document.getElementById('switchMode').onclick = function () {
  const guest = document.getElementById('guestMode');
  const login = document.getElementById('loginMode');
  if (guest.classList.contains('hidden')) {
    guest.classList.remove('hidden');
    login.classList.add('hidden');
    this.innerText = 'åˆ‡æ›åˆ°ç™»å…¥æ¨¡å¼';
  } else {
    guest.classList.add('hidden');
    login.classList.remove('hidden');
    this.innerText = 'åˆ‡æ›åˆ°è¨ªå®¢æ¨¡å¼';
    displayHistory();
  }
};
</script>
</body>
</html>
